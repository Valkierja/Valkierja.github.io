---
title: 图形学笔记5 光栅化
poc: true
categories:
  - - 图形学笔记
tags:
  - 图形学
date: 2023-04-14 15:33:48
---

### 词源

光栅化一词起源于德语, 原型是屏幕加上动词后缀(笔者德语没有系统性学过 不知道这样说对不对) 也就是说 光栅化的原本意思是 `在屏幕上绘制` 这一动作

### 视锥范围的感性划定

我们在上节课提到了视锥, 那么如何直观的划定视锥的范围

我们规定看向的第一个面是near , 然后求出来垂直视角 $fovY$ ,再定义一下视角比 $aspect \ ratio$ 根据这两个值就可以求出来水平视角$fovX$ 

![image-20230414183252766](https://raw.githubusercontent.com/Valkierja/ALLPIC/main/img/202304141832803.png)

 这里我们假设图片中间的灰色虚线经过坐标轴, 也就是说 $l=-r,$ $b=-t$

得到如下关系
$$
\begin{aligned}
\tan \frac{f o v Y}{2} & =\frac{t}{|n|} \\
\text { aspect } & =\frac{r}{t}
\end{aligned}
$$
![image-20230414190228185](https://raw.githubusercontent.com/Valkierja/ALLPIC/main/img/202304141902223.png)

### 定义什么是屏幕(可绘制对象)

我们把屏幕定义成这样(一般的情况下, 屏幕坐标系的原点是屏幕最左上角的地方, 这里为了直观和方便, 定义为最左下角)

![image-20230414214039247](https://raw.githubusercontent.com/Valkierja/ALLPIC/main/img/202304142140284.png)

第一个像素点的**索引(index)**被标记为二元组 $(0,0)$ 其中心坐标为 $(0.5,0.5)$ 需要加上0.5

索引数： $from \ (0,0)\ to \ (x-1,y-1)$

屏幕cover的范围： $from \ (0,0)\ to \ (x,y)$



### 把上一小节的视锥映射到屏幕(视口变换)

首先**暂时忽略**z坐标, 该值表示深度, 后续会用于竞争待渲染元素对像素的所有权

只看x和y的话就很直观了, 只需要把正方体的视锥, 拉伸到屏幕的大小

拉伸函数为:
$$
M_{\text {viewport }}=\left(\begin{array}{cccc}
\frac{\text { width }}{2} & 0 & 0 & \frac{\text { width }}{2} \\
0 & \frac{\text { height }}{2} & 0 & \frac{\text { height }}{2} \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{array}\right)
$$


w列向量用于平移枢轴

另外两个主对角向量用于缩放scale

